import{h as qe,p as Je,i as ma,a as ua,j as fa,T as pa,D as ea,k as ga,P as Se,F as we,B as We,m as ze,n as De,o as Ce,q as de,r as ce,u as ae,t as oe,v as je,w as xe,x as ha,y as ka,z as ya,A as ba,C as wa,E as pe,b as aa,c as Ze,G as Ca,H as xa,R as Pa,I as be,J as Sa,K as Ta,L as Ea}from"../chunks/components.svelte.C8WsT825.js";import{g as Pe,b as ta}from"../chunks/entry.CEFLSdhT.js";import{r as Ma,C as Me}from"../chunks/Control.BPTtxdaA.js";import{i as te,a as s,b as U,t as _,d as Fe,e as N,s as Be,k as ra,l as na,j as Ae,c as le,h as Ia}from"../chunks/disclose-version.Ca3QTfmr.js";import{h as Qe,i as za,j as Da,at as ja,p as Oa,k as qa,l as Aa,U as La,n as ge,u as sa,a as Fa,o as D,s as d,v as o,w as l,g as e,t as T,q as he,f as fe,D as w,aa as X,$ as Na,au as Ra}from"../chunks/utils.zETNLfH2.js";import{p as Te,a as f,b as Le,o as oa,d as Ka,c as Xe}from"../chunks/index-client.Cq_m8h8c.js";import{M as Ne,s as Oe,c as Ie,o as Ye}from"../chunks/squish.DxeluuGU.js";import{c as la}from"../chunks/svelte-component.WBZUxysB.js";function $e(h,a,t){Qe&&za();var c=h,k=La,p;Da(()=>{ja(k,k=a())&&(p&&Oa(p),p=qa(()=>t(c)))}),Qe&&(c=Aa)}const Wa=!1;async function Ya({params:h}){const a=h.id,t=h.type==="skill";let c;if(t){for(const k of Pe(qe.skills))if(k.name==a){c=k;break}if(c){if(!c.loaded){let k;if(c.location==="local")k=Je(localStorage.getItem(`sapi.skill.${c.name}`)||"");else{const p=await ma.getSkillYaml(c.name);k=Je(p)}k&&Object.keys(k).length>0&&await c.load(Object.values(k)[0]),c.postLoad()}return ua.set(c),fa.set(pa.SKILLS),{data:c}}}Ma(302,`${ta}/${h.type}/${h.id}/edit`)}const Ut=Object.freeze(Object.defineProperty({__proto__:null,load:Ya,ssr:Wa},Symbol.toStringTag,{value:"Module"}));var Ba=_('<div class="modal-desc svelte-13h7ryw"><!></div>'),Va=_("<!> <!>",1),Ua=_('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!> <!> <!></div>',1);function Ga(h,a){ge(a,!0);let t=Te(a,"data",15,void 0);sa(()=>{var c;(c=t())==null||c.data.forEach(k=>{k instanceof ea&&k.init()})}),Fa(()=>{var c;(t()||!t())&&((c=a.onsave)==null||c.call(a))}),Ne(h,{get onclose(){return a.onclose},width:"70%",children:(c,k)=>{var p=te(),P=D(p);f(P,t,r=>{var j=Ua(),M=D(j),O=d(M),q=d(O,!0);o(O),o(M);var L=l(M,2);f(L,()=>t().description,E=>{var m=Ba(),v=d(m);ga(v,()=>t().description),o(m),s(E,m)});var C=l(L,4),g=d(C);Se(g,{label:"Comment",tooltip:"[comment] A comment that will be displayed in the skill editor",get value(){return t().comment},set value(E){t(t().comment=E,!0)}});var I=l(g,2);f(I,()=>t()instanceof we&&t().name!=="Cast"&&t().name!=="Initialize"&&t().name!=="Cleanup",E=>{var m=Va(),v=D(m);We(v,{name:"Mana",tooltip:"[mana] Whether this trigger requires the mana cost to activate",get data(){return t().mana},set data(y){t(t().mana=y,!0)}});var A=l(v,2);We(A,{name:"Cooldown",tooltip:"[cooldown] Whether this trigger requires to be off cooldown to activate",get data(){return t().cooldown},set data(y){t(t().cooldown=y,!0)}}),s(E,m)},E=>{var m=te(),v=D(m);f(v,()=>t()instanceof ze||t()instanceof De||t()instanceof Ce,A=>{Se(A,{label:"Icon Key",get value(){return t().iconKey},set value(y){t(t().iconKey=y,!0)},tooltip:'[icon-key] The key used by the component in the Icon Lore. If this is set to "example" and has a value name of "value", it can be referenced using the string "{attr:example.value}"'})},null,!0),s(E,m)});var W=l(I,2);f(W,()=>t()instanceof Ce,E=>{We(E,{name:"Counts as Cast",tooltip:'[counts] Whether this mechanic running treats the skill as "casted" and will consume mana and start the cooldown. Set to false if it is a mechanic applled when the skill fails such as cleanup or an error message',get data(){return t().countsAsCast},set data(m){t(t().countsAsCast=m,!0)}})});var F=l(W,2);de(F,17,()=>t().data,ce,(E,m)=>{var v=te(),A=D(v);f(A,()=>e(m).meetsRequirements(t()),y=>{var S=te(),b=D(S),Y=fe(()=>`${(e(m).key?"["+e(m).key+"] ":"")??""}${e(m).tooltip??""}`);la(b,()=>e(m).component,(H,J)=>{J(H,{get data(){return e(m).data},set data(K){e(m).data=K},get name(){return e(m).name},get tooltip(){return e(Y)},get multiple(){return e(m).multiple},get onsave(){return a.onsave}})}),s(y,S)}),s(E,v)}),o(C),T(()=>{ae(M,"deprecated",t().isDeprecated),U(q,t().name)}),s(r,j)}),s(c,p)},$$slots:{default:!0}}),he()}var Ha=(h,a)=>w(a,!e(a)),Ja=(h,a,t)=>a.addComponent(e(t).component),Za=_('<div class="comp-select svelte-1kmselj"> </div>'),Qa=_('<div class="component-section svelte-1kmselj"></div>'),Xa=_('<div class="comp-subsection svelte-1kmselj"><h4 class="comp-subsection-header svelte-1kmselj"> <span class="icon material-symbols-rounded svelte-1kmselj">expand_more</span></h4> <!></div>');function ia(h,a){ge(a,!0);let t=Te(a,"sectionName",3,""),c=Te(a,"components",19,()=>[]),k=X(!0);var p=Xa(),P=d(p);P.__click=[Ha,k];var r=d(P),j=l(r);o(P);var M=l(P,2);f(M,()=>e(k),O=>{var q=Qa();de(q,21,c,ce,(L,C)=>{var g=Za();g.__click=[Ja,a,C];const I=fe(()=>je.includes(e(C).component));T(()=>ae(g,"deprecated",e(I)));var W=d(g,!0);o(g),T(()=>U(W,e(C).name)),N("keypress",g,F=>{F.key==="Enter"&&a.addComponent(e(C).component)}),s(L,g)}),o(q),oe(3,q,()=>Oe,()=>({duration:200})),s(O,q)}),o(p),T(()=>{U(r,`${t()??""} `),ae(j,"expanded",e(k))}),s(h,p),he()}Fe(["click"]);var $a=(h,a)=>w(a,!e(a)),et=(h,a,t)=>a(e(t).component),at=_("<s> </s>"),tt=_('<div class="comp-select"><!></div>'),rt=_('<div class="component-section svelte-117z55l"></div>'),nt=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Targets <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),st=(h,a)=>w(a,!e(a)),ot=(h,a,t)=>a(e(t).component),lt=_("<s> </s>"),it=_('<div class="comp-select"><!></div>'),dt=_('<div class="component-section svelte-117z55l"></div>'),vt=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Conditions <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),ct=(h,a)=>w(a,!e(a)),_t=_('<div class="component-section svelte-117z55l"></div>'),mt=_('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Mechanics <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),ut=_('<div class="modal-header-wrapper"><div></div> <h2>Add a Component</h2> <div class="search-bar"><!></div></div> <!> <!> <!> <hr> <div class="cancel">Cancel</div>',1);function ft(h,a){ge(a,!0);const t=Be(),c=()=>le(xe,"$filterParams",t),k=()=>le(ha,"$filteredTargets",t),p=()=>le(ka,"$filteredConditions",t),P=()=>le(ya,"$filteredMechanics",t),r=()=>le(ba,"$mechanicSections",t);let j=X(!0),M=X(!0),O=X(!0);const q=L=>{var g;const C=L.new().defaultOpen();C.isDeprecated=je.includes(L),a.data.addComponent(C),xe.set(""),(g=a.onsave)==null||g.call(a),Ie()};Ne(h,{width:"70%",open:!0,onclose:Ie,children:(L,C)=>{var g=ut(),I=D(g),W=l(d(I),4),F=d(W);Se(F,{get value(){return ra(),c()},set value(y){na(xe,Le(y))},placeholder:"Search...",autofocus:!0}),o(W),o(I);var E=l(I,2);f(E,()=>k().length>0,y=>{var S=nt(),b=l(D(S),2);b.__click=[$a,j];var Y=d(b),H=l(d(Y));o(Y),o(b);var J=l(b,2);f(J,()=>e(j),K=>{var z=rt();de(z,5,k,ce,(ie,R)=>{var u=tt();u.__click=[et,q,R];var _e=d(u);f(_e,()=>je.includes(e(R).component),B=>{var V=at(),ke=d(V,!0);o(V),T(()=>U(ke,e(R).name)),s(B,V)},B=>{var V=Ae();T(()=>U(V,e(R).name)),s(B,V)}),o(u),N("keypress",u,B=>{B.key==="Enter"&&q(e(R).component)}),s(ie,u)}),o(z),oe(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(j))),N("keypress",b,K=>{K.key==="Enter"&&w(j,!e(j))}),s(y,S)});var m=l(E,2);f(m,()=>p().length>0,y=>{var S=vt(),b=l(D(S),2);b.__click=[st,M];var Y=d(b),H=l(d(Y));o(Y),o(b);var J=l(b,2);f(J,()=>e(M),K=>{var z=dt();de(z,5,p,ce,(ie,R)=>{var u=it();u.__click=[ot,q,R];var _e=d(u);f(_e,()=>je.includes(e(R).component),B=>{var V=lt(),ke=d(V,!0);o(V),T(()=>U(ke,e(R).name)),s(B,V)},B=>{var V=Ae();T(()=>U(V,e(R).name)),s(B,V)}),o(u),N("keypress",u,B=>{B.key==="Enter"&&q(e(R).component)}),s(ie,u)}),o(z),oe(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(M))),N("keypress",b,K=>{K.key==="Enter"&&w(M,!e(M))}),s(y,S)});var v=l(m,2);f(v,()=>P().length>0,y=>{var S=mt(),b=l(D(S),2);b.__click=[ct,O];var Y=d(b),H=l(d(Y));o(Y),o(b);var J=l(b,2);f(J,()=>e(O),K=>{var z=_t();de(z,5,()=>Object.keys(r()),ce,(ie,R)=>{var u=te(),_e=D(u);f(_e,()=>r()[e(R)].length>0,B=>{ia(B,{get sectionName(){return e(R)},get components(){return r()[e(R)]},addComponent:q})}),s(ie,u)}),o(z),oe(3,z,()=>Oe,()=>({duration:200})),s(K,z)}),T(()=>ae(H,"expanded",e(O))),N("keypress",b,K=>{K.key==="Enter"&&w(O,!e(O))}),s(y,S)});var A=l(v,4);A.__click=function(...y){var S;(S=Ie)==null||S.apply(this,y)},N("keypress",A,y=>{y.key==="Enter"&&Ie()}),s(L,g)},$$slots:{default:!0}}),he()}Fe(["click"]);var pt=_('<div class="modal-desc svelte-13h7ryw"> </div>'),gt=_('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!></div>',1);function ht(h,a){ge(a,!0);let t=Te(a,"data",7);sa(()=>{t()&&t().preview.forEach(c=>{c instanceof ea&&c.init()})}),Ne(h,{get onclose(){return a.onclose},width:"70%",children:(c,k)=>{var p=gt(),P=D(p),r=d(P),j=d(r);o(r),o(P);var M=l(P,2);f(M,()=>t().description,C=>{var g=pt(),I=d(g,!0);o(g),T(()=>U(I,t().description)),s(C,g)});var O=l(M,4),q=d(O);Se(q,{label:"Enable Preview",tooltip:"[enabled] Whether this component will show its preview while casting. Requires a compatible casting mode: Item, Bars (hover bar only), Action bar, Title, Subtitle or Chat",children:(C,g)=>{wa(C,{get data(){return t().enablePreview},set data(I){t().enablePreview=I}})},$$slots:{default:!0}});var L=l(q,2);f(L,()=>t().enablePreview,C=>{var g=te(),I=D(g);de(I,17,()=>t().preview,ce,(W,F)=>{var E=te(),m=D(E);f(m,()=>e(F).meetsPreviewRequirements(t()),v=>{var A=te(),y=D(A),S=fe(()=>`${(e(F).key?"["+e(F).key+"] ":"")??""}${e(F).tooltip??""}`);la(y,()=>e(F).component,(b,Y)=>{Y(b,{get data(){return e(F).data},set data(H){e(F).data=H},get name(){return e(F).name},get tooltip(){return e(S)},get multiple(){return e(F).multiple},get onsave(){return a.onsave}})}),s(v,A)}),s(W,E)}),s(C,g)}),o(O),T(()=>{ae(P,"deprecated",t().isDeprecated),U(j,`${t().name??""} - Preview`)}),s(c,p)},$$slots:{default:!0}}),he()}var kt=_("<s> </s>"),yt=(h,a)=>{h.stopPropagation(),w(a,!e(a))},bt=_('<span class="material-symbols-rounded svelte-1v0lr19">expand_more</span>'),wt=_('<span class="material-symbols-rounded svelte-1v0lr19">expand_less</span>'),Ct=_('<span class="color-sample svelte-1v0lr19"></span>'),xt=_('<span class="summary-item svelte-1v0lr19"><span> </span> <!></span>'),Pt=_('<div class="summary svelte-1v0lr19"><!></div>'),St=_('<div class="comment svelte-1v0lr19"> </div>'),Tt=_('<div class="filler svelte-1v0lr19" role="none"></div>'),Et=_("<span><!></span>"),Mt=_('<div class="child-wrapper"></div>'),It=_('<div class="controls svelte-1v0lr19"><!> <!> <!> <!></div> <div class="children svelte-1v0lr19"><!></div>',1),zt=_('<div class="wrapper svelte-1v0lr19"><div class="comp-body svelte-1v0lr19" draggable="true" role="treeitem" tabindex="0"><div class="name svelte-1v0lr19"><span class="svelte-1v0lr19"> </span> <!></div> <div class="corner svelte-1v0lr19" role="button" tabindex="0"></div> <!> <!> <!> <!></div></div>');function da(h,a){ge(a,!0);const t=Be(),c=()=>le(pe,"$draggingComponent",t),k=()=>le(Ca,"$useSymbols",t),p=()=>le(xa,"$showSummaryItems",t),P=()=>le(q,"$skills",t);let r=Te(a,"component",7),j=X(void 0),M=X(void 0),O=X(Le([]));const q=qe.skills;let L=X(!1),C=X(!1),g=X(!1),I=X(!1),W=X(!1),F=!1,E;const m=n=>{n==null||n.stopPropagation(),Ye(Ga,r())},v=n=>{n.stopPropagation(),Ye(ft,r())},A=n=>{n.stopPropagation(),Ye(ht,r())};oa(()=>{E=r().components.subscribe(n=>w(O,Le(n))),r()._defaultOpen&&(m(),r()._defaultOpen=!1)}),Ka(()=>{E&&E()});const y=(n=!1)=>{if(n){if(r()instanceof we)return"ðŸš©";if(r()instanceof De)return"âš ";if(r()instanceof ze)return"ðŸŽ¯";if(r()instanceof Ce)return"ðŸ”§"}return r()instanceof we?"Trigger":r()instanceof De?"Condition":r()instanceof ze?"Target":r()instanceof Ce?"Mechanic":"???"},S=()=>r()instanceof we?"#0083ef":r()instanceof De?"#feac00":r()instanceof ze?"#04af38":r()instanceof Ce?"#ff3a3a":"orange",b=(n,{duration:i})=>({duration:i,css:x=>`transform: rotate(${180-Sa(x)*180}deg);`}),Y=n=>{var x;if(n.stopPropagation(),n.preventDefault(),r()==Pe(pe)||(w(C,!0),r()instanceof we))return;const i=((x=e(j))==null?void 0:x.getBoundingClientRect())||{top:0,height:0};w(I,n.clientY<i.height/2+i.top),w(W,n.clientY>=i.height/2+i.top)},H=()=>{w(C,!1),w(I,!1),w(W,!1)},J=n=>{var i,x;n.stopPropagation(),(!n.relatedTarget||!((i=e(j))!=null&&i.contains(n.relatedTarget))||(x=e(M))!=null&&x.contains(n.relatedTarget))&&H()},K=n=>{var x;n.stopPropagation();let i=Pe(pe);i&&((x=a.onaddskill)==null||x.call(a,{comp:i,relativeTo:r(),above:e(I)})),H()},z=n=>{var ee;let{comp:i,relativeTo:x,above:$}=n,G=e(O).indexOf(x);a.skill.removeComponent(i),r().addComponent(i,G+($?0:1)),(ee=a.onsave)==null||ee.call(a)},ie=n=>{var $;n.stopPropagation();const i={};i[`${r().name}-copy`]=r().toYamlObj();const x=Pa.deserializeComponents(i);r().parent?x.forEach(G=>{var ee;return(ee=r().parent)==null?void 0:ee.addComponent(G)}):(x.forEach(G=>a.skill.addComponent(G)),($=a.onupdate)==null||$.call(a))};var R=zt(),u=d(R);Xe(u,n=>w(j,n),()=>e(j)),u.__click=m;const _e=fe(S);var B=d(u),V=d(B),ke=d(V,!0);T(()=>U(ke,y(k()))),o(V);var Ve=l(V),va=l(Ve);f(va,()=>r().isDeprecated,n=>{var i=kt(),x=d(i,!0);o(i),T(()=>U(x,r().name)),s(n,i)},n=>{var i=Ae();T(()=>U(i,r().name)),s(n,i)}),o(B);var Re=l(B,2);Re.__click=[yt,L];var Ue=l(Re,2);f(Ue,()=>e(L),n=>{var i=bt();oe(1,i,()=>b,()=>({duration:400})),s(n,i)},n=>{var i=wt();oe(1,i,()=>b,()=>({duration:400})),s(n,i)});var Ge=l(Ue,2);f(Ge,()=>p()&&r().summaryItems&&r().summaryItems.length>0,n=>{var i=Pt(),x=d(i);$e(x,P,$=>{var G=te(),ee=D(G);de(ee,17,()=>r().summaryItems,ce,(Ke,ve)=>{var Ee=te(),re=D(Ee);f(re,()=>r().getValue(e(ve)),Z=>{var ne=xt(),me=d(ne),Q=d(me);o(me);var se=l(me,2);f(se,()=>e(ve).includes("color"),ue=>{var ye=Ct();const _a=fe(()=>r().getValue(e(ve)));T(()=>Ze(ye,"background-color",e(_a))),s(ue,ye)},ue=>{var ye=Ae();T(()=>U(ye,r().getValue(e(ve)))),s(ue,ye)}),o(ne),T(()=>U(Q,`${e(ve)??""}:`)),s(Z,ne)}),s(Ke,Ee)}),s($,G)}),o(i),s(n,i)});var He=l(Ge,2);$e(He,P,n=>{var i=te(),x=D(i);f(x,()=>r().comment||F,$=>{var G=St(),ee=d(G,!0);o(G),T(()=>U(ee,r().comment)),s($,G)}),s(n,i)});var ca=l(He,2);f(ca,()=>!e(L),n=>{var i=It(),x=D(i),$=d(x);f($,()=>r().isParent,re=>{var Z=fe(S);Me(re,{title:"Add Component",icon:"add",get color(){return e(Z)},onclick:v})});var G=l($,2);f(G,()=>r().preview&&r().preview.length>0,re=>{Me(re,{title:"Preview Settings",icon:"visibility",color:"gray",onclick:A})});var ee=l(G,2);Me(ee,{title:"Clone",icon:"content_copy",color:"white",onclick:ie});var Ke=l(ee,2);Me(Ke,{title:"Delete",icon:"delete",color:"red",onclick:re=>{var Z;re.stopPropagation(),a.skill.removeComponent(r()),(Z=a.onupdate)==null||Z.call(a)}}),o(x);var ve=l(x,2),Ee=d(ve);f(Ee,()=>e(O).length===0,re=>{var Z=te(),ne=D(Z);f(ne,()=>r().isParent&&(e(C)||e(g)),me=>{var Q=Tt();T(()=>ae(Q,"overChildren",e(g))),N("dragenter",Q,se=>{se.stopPropagation(),w(g,!0),w(C,!1)}),N("dragover",Q,se=>{se.stopPropagation(),se.preventDefault()}),N("dragleave",Q,J),N("drop",Q,se=>{se.stopPropagation(),se.preventDefault(),w(g,!1);let ue=Pe(pe);ue&&(a.skill.removeComponent(ue),r().addComponent(ue))}),oe(3,Q,()=>be),s(me,Q)}),s(re,Z)},re=>{var Z=Mt();Xe(Z,ne=>w(M,ne),()=>e(M)),de(Z,21,()=>e(O),ne=>ne.id,(ne,me)=>{var Q=Et(),se=d(Q);da(se,{get skill(){return a.skill},get component(){return e(me)},get onupdate(){return a.onupdate},get onsave(){return a.onsave},onaddskill:z}),o(Q),oe(3,Q,()=>be),s(ne,Q)}),o(Z),s(re,Z)}),o(ve),oe(3,x,()=>be),oe(3,ve,()=>be),s(n,i)}),o(u),o(R),T(()=>{aa(u,"aria-selected",c()===r()),ae(u,"bottom",e(W)),ae(u,"dragging",c()===r()),ae(u,"over",e(C)),ae(u,"top",e(I)),Ze(u,"--comp-color",e(_e)),U(Ve,`${(k()?" ":": ")??""} `)}),N("dragend",u,()=>pe.set(void 0)),N("dragleave",u,J),N("dragover",u,Y),N("dragstart",u,n=>{n.stopPropagation(),pe.set(r())}),N("drop",u,K),N("keypress",u,n=>{n.key==="Enter"&&m(n)}),N("keypress",Re,n=>{n.key==="Enter"&&(n.stopPropagation(),w(L,!e(L)))}),oe(2,u,()=>be),s(h,R),he()}Fe(["click"]);var Dt=(h,a)=>w(a,!0),jt=_('<div class="widget svelte-178l6os"><!></div>'),Ot=_("<div>No triggers added yet.</div>"),qt=(h,a)=>w(a,!1),At=_('<div class="modal-header-wrapper"><div></div> <h2 class="modal-header svelte-178l6os">Select New Trigger</h2> <div class="search-bar"><!></div></div> <hr> <div class="component-section svelte-178l6os"></div> <hr> <div class="cancel" tabindex="0" role="button">Cancel</div>',1),Lt=_('<div class="header svelte-178l6os"><h2 class="svelte-178l6os"> <a class="material-symbols-rounded edit-skill chip svelte-178l6os" title="Edit">edit</a> <span class="add-trigger chip svelte-178l6os" role="button" tabindex="0" title="Add Trigger"><span class="material-symbols-rounded">new_label</span></span></h2> <hr></div> <div class="container svelte-178l6os"><!> <!></div> <!>',1);function Gt(h,a){ge(a,!0);const t=Be(),c=()=>le(xe,"$filterParams",t),k=()=>le(Ea,"$triggerSections",t);let p=fe(()=>{var v;return(v=a.data)==null?void 0:v.data}),P=X(!1);oa(()=>{let v;v=Ta.subscribe(A=>{A&&(v&&v(),j())})});const r=v=>{e(p).triggers.push(v.new().defaultOpen()),j(),setTimeout(()=>w(P,!1))},j=()=>{e(p).triggers=[...e(p).triggers],M()},M=()=>{qe.skills.set([...Pe(qe.skills)]),e(p).save()};var O=Lt();Ia(v=>{T(()=>Na.title=`Fabled Dynamic Editor - ${e(p).name??""}`)});var q=D(O),L=d(q),C=d(L),g=l(C),I=l(g,2);I.__click=[Dt,P],o(L),Ra(2),o(q);var W=l(q,2),F=d(W);de(F,17,()=>e(p).triggers,v=>v.id,(v,A)=>{var y=jt(),S=d(y);da(S,{get skill(){return e(p)},get component(){return e(A)},onupdate:j,onsave:M}),o(y),s(v,y)});var E=l(F,2);f(E,()=>e(p).triggers.length===0,v=>{var A=Ot();s(v,A)}),o(W);var m=l(W,2);f(m,()=>e(P),v=>{Ne(v,{onclose:()=>w(P,!1),children:(A,y)=>{var S=At(),b=D(S),Y=l(d(b),4),H=d(Y);Se(H,{get value(){return ra(),c()},set value(z){na(xe,Le(z))},placeholder:"Search...",autofocus:!0}),o(Y),o(b);var J=l(b,4);de(J,5,()=>Object.keys(k()),ce,(z,ie)=>{ia(z,{get sectionName(){return e(ie)},get components(){return k()[e(ie)]},addComponent:r})}),o(J);var K=l(J,4);K.__click=[qt,P],N("keypress",K,z=>z.key==="Enter"&&w(P,!1)),s(A,S)},$$slots:{default:!0}})}),T(()=>{U(C,`${e(p).name??""} `),aa(g,"href",`${ta??""}/skill/${e(p).name??""}/edit`)}),N("keypress",I,v=>v.key==="Enter"&&w(P,!0)),s(h,O),he()}Fe(["click"]);export{Gt as component,Ut as universal};
