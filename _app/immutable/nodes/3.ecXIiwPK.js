import{h as Le,p as Xe,i as ha,a as ya,j as $a,T as ba,k as ka,P as Ie,m as Pe,n as ve,o as fe,q as ee,t as le,u as Ee,v as wa,w as Ca,x as xa,y as Sa,z as $e,b as ra,A as Ta,B as Pa,R as Ea,C as Te,D as Ma,E as za}from"../chunks/class-store.pbq76w2p.js";import{g as Me,b as na}from"../chunks/entry.j2XGvQNg.js";import{r as Ia,C as Oe}from"../chunks/Control.CaH10ks_.js";import{c as ae,a as s,s as V,t as c,e as f,d as Ne,h as Da}from"../chunks/disclose-version.B9aixzAF.js";import{h as ea,c as Oa,b as ja,aw as qa,p as Aa,a as Fa,d as La,U as Na,o as ke,g as e,s as y,q as z,x as l,y as r,z as n,ax as Ve,v as T,w as we,ay as H,a3 as be,at as oa,k as la,au as ia,az as Ra,$ as Ba,aA as Wa}from"../chunks/runtime.LqzrUpiV.js";import{p as ue,e as Ya,i as g,c as da,o as va,f as Ka,b as aa}from"../chunks/index-client.no01Ekxd.js";import{i as Ce}from"../chunks/lifecycle.CXak-Nyl.js";import{s as Ze,b as ca,a as ie}from"../chunks/store.BxMbIY2h.js";import{b as pe,T as Ua,s as oe,p as Ye,a as ta,e as Va}from"../chunks/Toggle.C8JTk9bz.js";import{D as Za,M as Re,B as Ke,F as qe,a as Ae,b as ze,s as Fe,c as je,o as Ue}from"../chunks/modal-service.C8gwZ82w.js";import{c as ma}from"../chunks/svelte-component.CzPyeCww.js";function sa(B,p,a){ea&&Oa();var _=B,o=Na,I;ja(()=>{qa(o,o=p())&&(I&&Aa(I),I=Fa(()=>a(_)))}),ea&&(_=La)}const Ga=!1;async function Ha({params:B}){const p=B.id,a=B.type==="skill";let _;if(a){for(const o of Me(Le.skills))if(o.name==p){_=o;break}if(_){if(!_.loaded){let o;if(_.location==="local")o=Xe(localStorage.getItem(`sapi.skill.${_.name}`)||"");else{const I=await ha.getSkillYaml(_.name);o=Xe(I)}o&&Object.keys(o).length>0&&await _.load(Object.values(o)[0]),_.postLoad()}return ya.set(_),$a.set(ba.SKILLS),{data:_}}}Ia(302,`${na}/${B.type}/${B.id}/edit`)}const Ut=Object.freeze(Object.defineProperty({__proto__:null,load:Ha,ssr:Ga},Symbol.toStringTag,{value:"Module"}));var Ja=c('<div class="modal-desc svelte-13h7ryw"><!></div>'),Qa=c("<!> <!>",1),Xa=c('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!> <!> <!></div>',1);function et(B,p){ke(p,!1);let a=ue(p,"data",12,void 0),_=H(!0);Ya(()=>{!e(_)||!a()||a().data.filter(o=>o instanceof Za).forEach(o=>o.init())}),Ce(),Re(B,{get open(){return e(_)},set open(o){y(_,o)},width:"70%",$$events:{close(o){pe.call(this,p,o)}},children:(o,I)=>{var k=ae(),$=z(k);g($,a,t=>{var M=Xa(),P=z(M),C=l(P),Y=l(C);r(C),r(P);var q=n(P,2);g(q,()=>a().description,A=>{var m=Ja(),v=l(m);ka(v,()=>a().description),r(m),s(A,m)});var b=n(q,4),h=l(b);Ie(h,{label:"Comment",tooltip:"[comment] A comment that will be displayed in the skill editor",get value(){return a().comment},set value(A){a(a().comment=A,!0)},$$legacy:!0});var D=n(h,2);g(D,()=>a()instanceof Pe&&a().name!=="Cast"&&a().name!=="Initialize"&&a().name!=="Cleanup",A=>{var m=Qa(),v=z(m);Ke(v,{name:"Mana",tooltip:"[mana] Whether this trigger requires the mana cost to activate",get data(){return a().mana},set data(x){a(a().mana=x,!0)},$$events:{save(x){pe.call(this,p,x)}},$$legacy:!0});var F=n(v,2);Ke(F,{name:"Cooldown",tooltip:"[cooldown] Whether this trigger requires to be off cooldown to activate",get data(){return a().cooldown},set data(x){a(a().cooldown=x,!0)},$$events:{save(x){pe.call(this,p,x)}},$$legacy:!0}),s(A,m)},A=>{var m=ae(),v=z(m);g(v,()=>a()instanceof qe||a()instanceof Ae||a()instanceof ze,F=>{Ie(F,{label:"Icon Key",get value(){return a().iconKey},set value(x){a(a().iconKey=x,!0)},tooltip:'[icon-key] The key used by the component in the Icon Lore. If this is set to "example" and has a value name of "value", it can be referenced using the string "{attr:example.value}"',$$legacy:!0})},null,!0),s(A,m)});var N=n(D,2);g(N,()=>a()instanceof ze,A=>{Ke(A,{name:"Counts as Cast",tooltip:'[counts] Whether this mechanic running treats the skill as "casted" and will consume mana and start the cooldown. Set to false if it is a mechanic applled when the skill fails such as cleanup or an error message"',get data(){return a().countsAsCast},set data(m){a(a().countsAsCast=m,!0)},$$events:{save(m){pe.call(this,p,m)}},$$legacy:!0})});var E=n(N,2);ve(E,1,()=>a().data,fe,(A,m)=>{var v=ae(),F=z(v);g(F,()=>e(m).meetsRequirements(a()),x=>{var S=ae(),O=z(S),w=be(()=>`${(e(m).key?"["+e(m).key+"] ":"")??""}${e(m).tooltip??""}`);ma(O,()=>e(m).component,(L,J)=>{J(L,{get data(){return e(m).data},set data(W){e(m).data=W,Ve(()=>a().data)},get name(){return e(m).name},get tooltip(){return e(w)},get multiple(){return e(m).multiple},$$events:{save(W){pe.call(this,p,W)}},$$legacy:!0})}),s(x,S)}),s(A,v)}),r(b),T(()=>{ee(P,"deprecated",a().isDeprecated),V(Y,a().name)}),s(t,M)}),s(o,k)},$$slots:{default:!0},$$legacy:!0}),we()}var at=c('<div class="comp-select svelte-1kmselj"> </div>'),tt=c('<div class="component-section svelte-1kmselj"></div>'),st=c('<div class="comp-subsection svelte-1kmselj"><h4 class="comp-subsection-header svelte-1kmselj"> <span class="icon material-symbols-rounded svelte-1kmselj">expand_more</span></h4> <!></div>');function pa(B,p){ke(p,!1);let a=ue(p,"sectionName",8,""),_=ue(p,"components",24,()=>[]),o=ue(p,"addComponent",8),I=H(!0);Ce();var k=st(),$=l(k),t=l($),M=n(t);r($);var P=n($,2);g(P,()=>e(I),C=>{var Y=tt();ve(Y,5,_,fe,(q,b)=>{var h=at();const D=be(()=>e(b).component.new().isDeprecated);T(()=>ee(h,"deprecated",e(D)));var N=l(h);r(h),T(()=>V(N,e(b).name)),f("click",h,()=>o()(e(b).component)),f("keypress",h,E=>{E.key==="Enter"&&o()(e(b).component)}),s(q,h)}),r(Y),le(3,Y,()=>Fe,()=>({duration:200})),s(C,Y)}),r(k),T(()=>{V(t,`${a()??""} `),ee(M,"expanded",e(I))}),f("click",$,()=>y(I,!e(I))),s(B,k),we()}var rt=c("<s> </s>"),nt=c('<div class="comp-select"><!></div>'),ot=c('<div class="component-section svelte-117z55l"></div>'),lt=c('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Targets <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),it=c("<s> </s>"),dt=c('<div class="comp-select"><!></div>'),vt=c('<div class="component-section svelte-117z55l"></div>'),ct=c('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Conditions <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),mt=c('<div class="component-section svelte-117z55l"></div>'),pt=c('<hr> <div class="comp-modal-header svelte-117z55l"><h3 class="svelte-117z55l">Mechanics <span class="icon material-symbols-rounded svelte-117z55l">expand_more</span></h3></div> <!>',1),ut=c('<div class="modal-header-wrapper"><div></div> <h2>Add a Component</h2> <div class="search-bar"><!></div></div> <!> <!> <!> <hr> <div class="cancel">Cancel</div>',1);function ft(B,p){ke(p,!1);const a=Ze(),_=()=>ie(Ee,"$filterParams",a),o=()=>ie(wa,"$filteredTargets",a),I=()=>ie(Ca,"$filteredConditions",a),k=()=>ie(xa,"$filteredMechanics",a),$=()=>ie(Sa,"$mechanicSections",a);let t=ue(p,"data",8),M=H(!0),P=H(!0),C=H(!0);const Y=da(),q=b=>{t().addComponent(b.new().defaultOpen()),Ee.set(""),Y("save"),je()};Ce(),Re(B,{width:"70%",open:!0,$$events:{close(...b){var h;(h=je)==null||h.apply(this,b)}},children:(b,h)=>{var D=ut(),N=z(D),E=n(l(N),4),A=l(E);Ie(A,{get value(){return _()},set value(S){ca(Ee,S)},placeholder:"Search...",autofocus:!0,$$legacy:!0}),r(E),r(N);var m=n(N,2);g(m,()=>o().length>0,S=>{var O=lt(),w=n(z(O),2),L=l(w),J=n(l(L));r(L),r(w);var W=n(w,2);g(W,()=>e(M),Z=>{var G=ot();ve(G,5,o,fe,(_e,R)=>{var u=nt(),ge=l(u);g(ge,()=>e(R).component.new().isDeprecated,K=>{var U=rt(),xe=l(U);r(U),T(()=>V(xe,e(R).name)),s(K,U)},K=>{var U=Ne();T(()=>V(U,e(R).name)),s(K,U)}),r(u),f("click",u,()=>q(e(R).component)),f("keypress",u,K=>{K.key==="Enter"&&q(e(R).component)}),s(_e,u)}),r(G),le(3,G,()=>Fe,()=>({duration:200})),s(Z,G)}),T(()=>ee(J,"expanded",e(M))),f("click",w,()=>y(M,!e(M))),f("keypress",w,Z=>{Z.key==="Enter"&&y(M,!e(M))}),s(S,O)});var v=n(m,2);g(v,()=>I().length>0,S=>{var O=ct(),w=n(z(O),2),L=l(w),J=n(l(L));r(L),r(w);var W=n(w,2);g(W,()=>e(P),Z=>{var G=vt();ve(G,5,I,fe,(_e,R)=>{var u=dt(),ge=l(u);g(ge,()=>e(R).component.new().isDeprecated,K=>{var U=it(),xe=l(U);r(U),T(()=>V(xe,e(R).name)),s(K,U)},K=>{var U=Ne();T(()=>V(U,e(R).name)),s(K,U)}),r(u),f("click",u,()=>q(e(R).component)),f("keypress",u,K=>{K.key==="Enter"&&q(e(R).component)}),s(_e,u)}),r(G),le(3,G,()=>Fe,()=>({duration:200})),s(Z,G)}),T(()=>ee(J,"expanded",e(P))),f("click",w,()=>y(P,!e(P))),f("keypress",w,Z=>{Z.key==="Enter"&&y(P,!e(P))}),s(S,O)});var F=n(v,2);g(F,()=>k().length>0,S=>{var O=pt(),w=n(z(O),2),L=l(w),J=n(l(L));r(L),r(w);var W=n(w,2);g(W,()=>e(C),Z=>{var G=mt();ve(G,5,()=>Object.keys($()),fe,(_e,R)=>{var u=ae(),ge=z(u);g(ge,()=>$()[e(R)].length>0,K=>{pa(K,{get sectionName(){return e(R)},get components(){return $()[e(R)]},addComponent:q})}),s(_e,u)}),r(G),le(3,G,()=>Fe,()=>({duration:200})),s(Z,G)}),T(()=>ee(J,"expanded",e(C))),f("click",w,()=>y(C,!e(C))),f("keypress",w,Z=>{Z.key==="Enter"&&y(C,!e(C))}),s(S,O)});var x=n(F,4);f("click",x,function(...S){var O;(O=je)==null||O.apply(this,S)}),f("keypress",x,S=>{S.key==="Enter"&&je()}),s(b,D)},$$slots:{default:!0}}),we()}var _t=c('<div class="modal-desc svelte-13h7ryw"> </div>'),gt=c('<h2 class="svelte-13h7ryw"><span class="svelte-13h7ryw"> </span></h2> <!> <hr> <div class="component-entry svelte-13h7ryw"><!> <!></div>',1);function ht(B,p){ke(p,!1);let a=ue(p,"data",12),_=H(!0);oa(()=>(e(_),la(a())),()=>{e(_)&&a()&&a().preview.filter(o=>o.dataSource).forEach(o=>o.init())}),ia(),Ce(),Re(B,{get open(){return e(_)},set open(o){y(_,o)},width:"70%",$$events:{close(o){pe.call(this,p,o)}},children:(o,I)=>{var k=gt(),$=z(k),t=l($),M=l(t);r(t),r($);var P=n($,2);g(P,()=>a().description,b=>{var h=_t(),D=l(h);r(h),T(()=>V(D,a().description)),s(b,h)});var C=n(P,4),Y=l(C);Ie(Y,{label:"Enable Preview",tooltip:"[enabled] Whether this component will show its preview while casting. Requires a compatible casting mode: Item, Bars (hover bar only), Action bar, Title, Subtitle or Chat",children:(b,h)=>{Ua(b,{get data(){return a().enablePreview},set data(D){a(a().enablePreview=D,!0)},$$legacy:!0})},$$slots:{default:!0}});var q=n(Y,2);g(q,()=>a().enablePreview,b=>{var h=ae(),D=z(h);ve(D,1,()=>a().preview,fe,(N,E)=>{var A=ae(),m=z(A);g(m,()=>e(E).meetsPreviewRequirements(a()),v=>{var F=ae(),x=z(F),S=be(()=>`${(e(E).key?"["+e(E).key+"] ":"")??""}${e(E).tooltip??""}`);ma(x,()=>e(E).component,(O,w)=>{w(O,{get data(){return e(E).data},set data(L){e(E).data=L,Ve(()=>a().preview)},get name(){return e(E).name},get tooltip(){return e(S)},get multiple(){return e(E).multiple},$$events:{save(L){pe.call(this,p,L)}},$$legacy:!0})}),s(v,F)}),s(N,A)}),s(b,h)}),r(C),T(()=>{ee($,"deprecated",a().isDeprecated),V(M,`${a().name??""} - Preview`)}),s(o,k)},$$slots:{default:!0},$$legacy:!0}),we()}var yt=c("<s> </s>"),$t=c('<span class="material-symbols-rounded svelte-1v0lr19">expand_more</span>'),bt=c('<span class="material-symbols-rounded svelte-1v0lr19">expand_less</span>'),kt=c('<span class="color-sample svelte-1v0lr19"></span>'),wt=c('<span class="summary-item svelte-1v0lr19"><span> </span> <!></span>'),Ct=c('<div class="summary svelte-1v0lr19"><!></div>'),xt=c('<div class="comment svelte-1v0lr19"> </div>'),St=c('<div class="filler svelte-1v0lr19" role="none"></div>'),Tt=c("<span><!></span>"),Pt=c('<div class="child-wrapper"></div>'),Et=c('<div class="controls svelte-1v0lr19"><!> <!> <!> <!></div> <div class="children svelte-1v0lr19"><!></div>',1),Mt=c('<div class="wrapper svelte-1v0lr19"><div draggable="true" tabindex="0" role="treeitem" class="comp-body svelte-1v0lr19"><div class="name svelte-1v0lr19"><span class="svelte-1v0lr19"> </span> <!></div> <div class="corner svelte-1v0lr19" tabindex="0" role="button"></div> <!> <!> <!> <!></div></div>');function ua(B,p){ke(p,!1);const a=Ze(),_=()=>ie($e,"$draggingComponent",a),o=()=>ie(Ta,"$useSymbols",a),I=()=>ie(Pa,"$showSummaryItems",a),k=()=>ie(Y,"$skills",a);let $=ue(p,"skill",8),t=ue(p,"component",12),M=H(),P=H(),C=H([]);const Y=Le.skills,q=da();let b=H(!1),h=H(!1),D=H(!1),N=H(!1),E=H(!1),A=!1,m;const v=()=>Ue(et,t()),F=()=>Ue(ft,t()),x=()=>Ue(ht,t());va(()=>{m=t().components.subscribe(i=>y(C,i)),t()._defaultOpen&&(v(),t(t()._defaultOpen=!1,!0))}),Ka(()=>{m&&m()});const S=(i=!1)=>{if(i){if(t()instanceof Pe)return"ðŸš©";if(t()instanceof Ae)return"âš ";if(t()instanceof qe)return"ðŸŽ¯";if(t()instanceof ze)return"ðŸ”§"}return t()instanceof Pe?"Trigger":t()instanceof Ae?"Condition":t()instanceof qe?"Target":t()instanceof ze?"Mechanic":"???"},O=()=>t()instanceof Pe?"#0083ef":t()instanceof Ae?"#feac00":t()instanceof qe?"#04af38":t()instanceof ze?"#ff3a3a":"orange",w=(i,{duration:d})=>({duration:d,css:j=>`transform: rotate(${180-Va(j)*180}deg);`}),L=i=>{if(t()==Me($e)||(y(h,!0),t()instanceof Pe))return;const d=e(M).getBoundingClientRect();y(N,i.clientY<d.height/2+d.top),y(E,i.clientY>=d.height/2+d.top)},J=()=>{y(h,!1),y(N,!1),y(E,!1)},W=i=>{var d,j;(!i.relatedTarget||!((d=e(M))!=null&&d.contains(i.relatedTarget))||(j=e(P))!=null&&j.contains(i.relatedTarget))&&J()},Z=()=>{let i=Me($e);q("addskill",{comp:i,relativeTo:t(),above:e(N)}),J()},G=i=>{let d=i.detail.comp,j=i.detail.relativeTo,Q=i.detail.above,te=e(C).indexOf(j);$().removeComponent(d),t().addComponent(d,te+(Q?0:1)),q("save")},_e=()=>{const i={};i[`${t().name}-copy`]=t().toYamlObj();const d=Ea.deserializeComponents(i);t().parent?d.forEach(j=>{var Q;return(Q=t().parent)==null?void 0:Q.addComponent(j)}):(d.forEach(j=>$().addComponent(j)),q("update"))};Ce();var R=Mt(),u=l(R);aa(u,i=>y(M,i),()=>e(M));const ge=be(O);var K=l(u),U=l(K),xe=l(U);T(()=>V(xe,S(o()))),r(U);var Ge=n(U),fa=n(Ge);g(fa,()=>t().isDeprecated,i=>{var d=yt(),j=l(d);r(d),T(()=>V(j,t().name)),s(i,d)},i=>{var d=Ne();T(()=>V(d,t().name)),s(i,d)}),r(K);var Be=n(K,2),He=n(Be,2);g(He,()=>e(b),i=>{var d=$t();le(1,d,()=>w,()=>({duration:400})),s(i,d)},i=>{var d=bt();le(1,d,()=>w,()=>({duration:400})),s(i,d)});var Je=n(He,2);g(Je,()=>I()&&t().summaryItems&&t().summaryItems.length>0,i=>{var d=Ct(),j=l(d);sa(j,k,Q=>{var te=ae(),he=z(te);ve(he,1,()=>t().summaryItems,fe,(We,ce)=>{var De=ae(),me=z(De);g(me,()=>t().getValue(e(ce)),se=>{var re=wt(),ye=l(re),X=l(ye);r(ye);var de=n(ye,2);g(de,()=>e(ce).includes("color"),Se=>{var ne=kt();const ga=be(()=>t().getValue(e(ce)));T(()=>ta(ne,"background-color",e(ga))),s(Se,ne)},Se=>{var ne=Ne();T(()=>V(ne,t().getValue(e(ce)))),s(Se,ne)}),r(re),T(()=>V(X,`${e(ce)??""}:`)),s(se,re)}),s(We,De)}),s(Q,te)}),r(d),s(i,d)});var Qe=n(Je,2);sa(Qe,k,i=>{var d=ae(),j=z(d);g(j,()=>t().comment||A,Q=>{var te=xt(),he=l(te);r(te),T(()=>V(he,t().comment)),s(Q,te)}),s(i,d)});var _a=n(Qe,2);g(_a,()=>!e(b),i=>{var d=Et(),j=z(d),Q=l(j);g(Q,()=>t().isParent,me=>{var se=be(O);Oe(me,{title:"Add Component",icon:"add",get color(){return e(se)},$$events:{click:F}})});var te=n(Q,2);g(te,()=>t().preview&&t().preview.length>0,me=>{Oe(me,{title:"Preview Settings",icon:"visibility",color:"gray",$$events:{click:x}})});var he=n(te,2);Oe(he,{title:"Clone",icon:"content_copy",color:"white",$$events:{click:_e}});var We=n(he,2);Oe(We,{title:"Delete",icon:"delete",color:"red",$$events:{click:()=>{$().removeComponent(t()),q("update")}}}),r(j);var ce=n(j,2),De=l(ce);g(De,()=>e(C).length===0,me=>{var se=ae(),re=z(se);g(re,()=>t().isParent&&(e(h)||e(D)),ye=>{var X=St();T(()=>ee(X,"overChildren",e(D))),le(3,X,()=>Te),f("dragenter",X,oe(()=>{y(D,!0),y(h,!1)})),f("dragover",X,Ye(oe(()=>{}))),f("dragleave",X,W),f("drop",X,Ye(oe(()=>{y(D,!1);let de=Me($e);de&&($().removeComponent(de),t().addComponent(de))}))),s(ye,X)}),s(me,se)},me=>{var se=Pt();aa(se,re=>y(P,re),()=>e(P)),ve(se,5,()=>e(C),re=>re.id,(re,ye,X)=>{var de=Tt(),Se=l(de);ua(Se,{get skill(){return $()},get component(){return e(C)[X]},set component(ne){e(C)[X]=ne,Ve(()=>e(C))},$$events:{update(ne){pe.call(this,p,ne)},save(ne){pe.call(this,p,ne)},addskill:G},$$legacy:!0}),r(de),le(3,de,()=>Te),s(re,de)}),r(se),s(me,se)}),r(ce),le(3,j,()=>Te),le(3,ce,()=>Te),s(i,d)}),r(u),r(R),T(()=>{ra(u,"aria-selected",_()===t()),ee(u,"over",e(h)),ee(u,"top",e(N)),ee(u,"bottom",e(E)),ee(u,"dragging",_()===t()),ta(u,"--comp-color",e(ge)),V(Ge,`${(o()?" ":": ")??""} `)}),f("click",Be,oe(()=>y(b,!e(b)))),f("keypress",Be,oe(i=>{i.key==="Enter"&&y(b,!e(b))})),le(2,u,()=>Te),f("dragstart",u,oe(()=>$e.set(t()))),f("dragend",u,()=>$e.set(void 0)),f("drop",u,oe(Z)),f("click",u,oe(v)),f("keypress",u,oe(i=>{i.key})),f("dragover",u,Ye(oe(L))),f("dragleave",u,oe(W)),s(B,R),we()}var zt=c('<div class="widget svelte-178l6os"><!></div>'),It=c("<div>No triggers added yet.</div>"),Dt=c('<div class="modal-header-wrapper"><div></div> <h2 class="modal-header svelte-178l6os">Select New Trigger</h2> <div class="search-bar"><!></div></div> <hr> <div class="component-section svelte-178l6os"></div> <hr> <div class="cancel" tabindex="0" role="button">Cancel</div>',1),Ot=c('<div class="header svelte-178l6os"><h2 class="svelte-178l6os"> <a class="material-symbols-rounded edit-skill chip svelte-178l6os" title="Edit">edit</a> <span class="add-trigger chip svelte-178l6os" title="Add Trigger" tabindex="0" role="button"><span class="material-symbols-rounded">new_label</span></span></h2> <hr></div> <div class="container svelte-178l6os"><!> <!></div> <!>',1);function Vt(B,p){ke(p,!1);const a=Ze(),_=()=>ie(Ee,"$filterParams",a),o=()=>ie(za,"$triggerSections",a);let I=ue(p,"data",8),k=H(),$=H(!1);va(()=>{let v;v=Ma.subscribe(F=>{F&&(v&&v(),M())})});const t=v=>{e(k).triggers.push(v.new().defaultOpen()),M(),setTimeout(()=>y($,!1))},M=()=>{Ra(k,e(k).triggers=[...e(k).triggers]),P()},P=()=>{Le.skills.set([...Me(Le.skills)]),e(k).save()};oa(()=>la(I()),()=>{I()&&y(k,I().data)}),ia(),Ce();var C=Ot();Da(v=>{T(()=>Ba.title=`Fabled Dynamic Editor - ${e(k).name??""}`)});var Y=z(C),q=l(Y),b=l(q),h=n(b),D=n(h,2);r(q),Wa(2),r(Y);var N=n(Y,2),E=l(N);ve(E,1,()=>e(k).triggers,v=>v.id,(v,F)=>{var x=zt(),S=l(x);ua(S,{get skill(){return e(k)},get component(){return e(F)},$$events:{update:M,save:P}}),r(x),s(v,x)});var A=n(E,2);g(A,()=>e(k).triggers.length===0,v=>{var F=It();s(v,F)}),r(N);var m=n(N,2);Re(m,{get open(){return e($)},set open(v){y($,v)},children:(v,F)=>{var x=Dt(),S=z(x),O=n(l(S),4),w=l(O);Ie(w,{get value(){return _()},set value(W){ca(Ee,W)},placeholder:"Search...",autofocus:!0,$$legacy:!0}),r(O),r(S);var L=n(S,4);ve(L,5,()=>Object.keys(o()),fe,(W,Z)=>{pa(W,{get sectionName(){return e(Z)},get components(){return o()[e(Z)]},addComponent:t})}),r(L);var J=n(L,4);f("click",J,()=>y($,!1)),f("keypress",J,W=>W.key==="Enter"&&y($,!1)),s(v,x)},$$slots:{default:!0},$$legacy:!0}),T(()=>{V(b,`${e(k).name??""} `),ra(h,"href",`${na??""}/skill/${e(k).name??""}/edit`)}),f("click",D,()=>y($,!0)),f("keypress",D,v=>v.key==="Enter"&&y($,!0)),s(B,C),we()}export{Vt as component,Ut as universal};
